<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Navigation - Presence CCRB</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        .warning { background-color: #fff3cd; border-color: #ffeaa7; }
        button { margin: 5px; padding: 10px 15px; background: #007bff; color: white; border: none; border-radius: 3px; cursor: pointer; }
        button:hover { background: #0056b3; }
        .test-result { margin: 10px 0; padding: 10px; border-radius: 3px; }
    </style>
</head>
<body>
    <h1>🧪 Test de Navigation - Presence CCRB</h1>
    
    <div class="test-section">
        <h2>📄 Test des Pages</h2>
        <button onclick="testPage('/')">🏠 Page d'accueil</button>
        <button onclick="testPage('/web/register.html')">📝 Inscription</button>
        <button onclick="testPage('/web/profile.html')">👤 Profil</button>
        <button onclick="testPage('/web/dashboard.html')">📊 Dashboard</button>
        <button onclick="testPage('/web/agents.html')">👥 Agents</button>
        <button onclick="testPage('/web/reports.html')">📈 Rapports</button>
        <button onclick="testPage('/web/admin.html')">⚙️ Admin</button>
        <button onclick="testPage('/web/map.html')">🗺️ Carte</button>
    </div>

    <div class="test-section">
        <h2>🔗 Test des Ressources</h2>
        <button onclick="testResource('/web/styles.css')">CSS Styles</button>
        <button onclick="testResource('/web/app.js')">App JS</button>
        <button onclick="testResource('/web/navigation.js')">Navigation JS</button>
        <button onclick="testResource('/web/geo-data.js')">Geo Data JS</button>
        <button onclick="testResource('/Media/logo-ccrb.png')">Logo</button>
        <button onclick="testResource('/web/manifest.webmanifest')">Manifest</button>
    </div>

    <div class="test-section">
        <h2>📊 Résultats des Tests</h2>
        <div id="test-results"></div>
    </div>

    <script>
        const results = [];
        
        function addResult(message, type = 'info') {
            const result = { message, type, timestamp: new Date().toLocaleTimeString() };
            results.push(result);
            displayResults();
        }
        
        function displayResults() {
            const container = document.getElementById('test-results');
            container.innerHTML = results.map(r => 
                `<div class="test-result ${r.type}">
                    <strong>[${r.timestamp}]</strong> ${r.message}
                </div>`
            ).join('');
        }
        
        async function testPage(url) {
            addResult(`🔍 Test de la page: ${url}`, 'info');
            try {
                const response = await fetch(url, { method: 'HEAD' });
                if (response.ok) {
                    addResult(`✅ Page accessible: ${url}`, 'success');
                } else {
                    addResult(`❌ Erreur ${response.status}: ${url}`, 'error');
                }
            } catch (error) {
                addResult(`❌ Erreur réseau: ${url} - ${error.message}`, 'error');
            }
        }
        
        async function testResource(url) {
            addResult(`🔍 Test de la ressource: ${url}`, 'info');
            try {
                const response = await fetch(url, { method: 'HEAD' });
                if (response.ok) {
                    addResult(`✅ Ressource accessible: ${url}`, 'success');
                } else {
                    addResult(`❌ Erreur ${response.status}: ${url}`, 'error');
                }
            } catch (error) {
                addResult(`❌ Erreur réseau: ${url} - ${error.message}`, 'error');
            }
        }
        
        // Test automatique au chargement
        window.addEventListener('load', () => {
            addResult('🚀 Tests de navigation initialisés', 'success');
        });
    </script>
</body>
</html>
